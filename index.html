<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üî• ÊâãÊ©üÁâàÊöñÊöñÂåÖ</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'PingFang TC', 'Microsoft JhengHei', 'Noto Sans TC', sans-serif;
      min-height: 100vh;
      overflow: hidden;
      touch-action: manipulation;
      user-select: none;
      transition: background 0.8s ease;
    }

    .bg-cold {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    }

    .bg-warm {
      background: linear-gradient(135deg, #2d1b00 0%, #5c2a00 30%, #8b3a00 60%, #c44d00 100%);
    }

    .bg-hot {
      background: linear-gradient(135deg, #4a0000 0%, #8b0000 30%, #cc3300 60%, #ff6600 100%);
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
      position: relative;
      z-index: 1;
    }

    h1 {
      color: #fff;
      font-size: clamp(1.5rem, 5vw, 2.5rem);
      text-align: center;
      margin-bottom: 8px;
      text-shadow: 0 2px 10px rgba(255, 100, 0, 0.5);
      animation: title-bounce 2s ease-in-out infinite;
    }

    @keyframes title-bounce {
      0%, 100% { transform: translateY(0) scale(1); }
      25% { transform: translateY(-6px) scale(1.03); }
      50% { transform: translateY(0) scale(1); }
      75% { transform: translateY(-3px) scale(1.01); }
    }

    .subtitle {
      color: rgba(255, 255, 255, 0.7);
      font-size: clamp(0.8rem, 2.5vw, 1rem);
      margin-bottom: 24px;
      animation: subtitle-fade 3s ease-in-out infinite alternate;
    }

    @keyframes subtitle-fade {
      0% { opacity: 0.6; letter-spacing: 0px; }
      100% { opacity: 1; letter-spacing: 2px; }
    }

    /* Main Button - Large and Prominent */
    .main-button {
      width: 280px;
      height: 280px;
      border-radius: 50%;
      border: none;
      font-size: 2rem;
      font-weight: bold;
      color: #fff;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      margin-bottom: 60px;
      letter-spacing: 2px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      gap: 8px;
    }

    .main-button::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.2) 50%, transparent 70%);
      animation: btn-shine 3s ease-in-out infinite;
    }

    @keyframes btn-shine {
      0% { transform: translateX(-100%) rotate(25deg); }
      100% { transform: translateX(100%) rotate(25deg); }
    }

    .main-button::after {
      content: '';
      position: absolute;
      inset: 8px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2), transparent);
      pointer-events: none;
    }

    .main-button.btn-inactive {
      background: linear-gradient(135deg, #ff6600, #ff4500, #ff2200);
      box-shadow: 0 10px 40px rgba(255, 69, 0, 0.5),
                  0 0 60px rgba(255, 100, 0, 0.3),
                  inset 0 -8px 20px rgba(0, 0, 0, 0.2);
      animation: btn-pulse 2s ease-in-out infinite;
    }

    .main-button.btn-active {
      background: linear-gradient(135deg, #2266cc, #4488ff, #2266cc);
      box-shadow: 0 10px 40px rgba(34, 102, 204, 0.6),
                  0 0 80px rgba(68, 136, 255, 0.4),
                  inset 0 -8px 20px rgba(0, 0, 0, 0.2);
      animation: btn-active-shake 0.3s ease-in-out infinite;
    }

    @keyframes btn-pulse {
      0%, 100% { 
        transform: scale(1);
        box-shadow: 0 10px 40px rgba(255, 69, 0, 0.5),
                    0 0 60px rgba(255, 100, 0, 0.3),
                    inset 0 -8px 20px rgba(0, 0, 0, 0.2);
      }
      50% { 
        transform: scale(1.05);
        box-shadow: 0 15px 50px rgba(255, 69, 0, 0.7),
                    0 0 100px rgba(255, 100, 0, 0.5),
                    inset 0 -8px 20px rgba(0, 0, 0, 0.2);
      }
    }

    @keyframes btn-active-shake {
      0%, 100% { transform: scale(1.02); }
      50% { transform: scale(1); }
    }

    .main-button.btn-inactive:hover:not(:active) {
      animation: none;
      transform: scale(1.08);
      box-shadow: 0 15px 50px rgba(255, 69, 0, 0.7),
                  0 0 100px rgba(255, 100, 0, 0.5),
                  inset 0 -8px 20px rgba(0, 0, 0, 0.2);
    }

    .main-button.btn-inactive:active {
      animation: none;
      transform: scale(0.95);
    }

    .main-button.btn-active:hover:not(:active) {
      animation: none;
      transform: scale(1.08);
      box-shadow: 0 15px 50px rgba(34, 102, 204, 0.8),
                  0 0 120px rgba(68, 136, 255, 0.6),
                  inset 0 -8px 20px rgba(0, 0, 0, 0.2);
    }

    .main-button.btn-active:active {
      animation: none;
      transform: scale(0.95);
    }

    /* Slider */
    .slider-section {
      width: 100%;
      max-width: 380px;
      margin-bottom: 20px;
    }

    .slider-label {
      color: #fff;
      font-size: 1.1rem;
      margin-bottom: 12px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 12px;
      font-weight: 600;
    }

    .slider-value {
      font-size: 2rem;
      font-weight: bold;
      color: #ffd700;
      text-shadow: 0 0 20px rgba(255, 215, 0, 0.6),
                   0 2px 10px rgba(0, 0, 0, 0.3);
      transition: transform 0.2s ease;
    }

    .slider-value.pop {
      animation: value-pop 0.3s ease;
    }

    @keyframes value-pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.3); }
      100% { transform: scale(1); }
    }

    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 16px;
      border-radius: 8px;
      background: linear-gradient(to right, #334, #ff4500, #ff0000);
      outline: none;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3),
                  inset 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, #ffd700);
      border: 4px solid #ff6600;
      box-shadow: 0 0 20px rgba(255, 100, 0, 0.8),
                  0 4px 15px rgba(0, 0, 0, 0.3);
      cursor: pointer;
      transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    input[type="range"]:active::-webkit-slider-thumb {
      transform: scale(1.3);
      box-shadow: 0 0 30px rgba(255, 100, 0, 1),
                  0 4px 20px rgba(0, 0, 0, 0.4);
    }

    input[type="range"]::-moz-range-thumb {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, #ffd700);
      border: 4px solid #ff6600;
      box-shadow: 0 0 20px rgba(255, 100, 0, 0.8),
                  0 4px 15px rgba(0, 0, 0, 0.3);
      cursor: pointer;
      transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    input[type="range"]:active::-moz-range-thumb {
      transform: scale(1.3);
    }

    /* Flame particles */
    .flames {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .flame-particle {
      position: absolute;
      bottom: -20px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      opacity: 0;
    }

    @keyframes rise {
      0% {
        opacity: 0.8;
        transform: translateY(0) scale(1);
      }
      100% {
        opacity: 0;
        transform: translateY(-100vh) scale(0.3);
      }
    }

    @keyframes rise-swirl {
      0% {
        opacity: 0.9;
        transform: translateY(0) translateX(0) scale(1) rotate(0deg);
      }
      25% { transform: translateY(-25vh) translateX(20px) scale(0.9) rotate(90deg); }
      50% { transform: translateY(-50vh) translateX(-15px) scale(0.7) rotate(180deg); }
      75% { transform: translateY(-75vh) translateX(10px) scale(0.5) rotate(270deg); }
      100% {
        opacity: 0;
        transform: translateY(-100vh) translateX(0) scale(0.2) rotate(360deg);
      }
    }

    /* Heat wave distortion overlay */
    .heat-wave {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 40%;
      pointer-events: none;
      z-index: 0;
      background: linear-gradient(to top, rgba(255, 69, 0, 0.08), transparent);
      animation: heat-wave-pulse 2s ease-in-out infinite alternate;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    .heat-wave.active {
      opacity: 1;
    }

    @keyframes heat-wave-pulse {
      0% { transform: scaleY(1); opacity: 0.5; }
      100% { transform: scaleY(1.15); opacity: 1; }
    }

    /* Warning banner */
    .warning {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0, 0, 0, 0.75);
      backdrop-filter: blur(8px);
      color: rgba(255, 255, 255, 0.85);
      text-align: center;
      padding: 12px 20px;
      font-size: 0.75rem;
      line-height: 1.4;
      z-index: 10;
      border-top: 1px solid rgba(255, 165, 0, 0.2);
    }

    /* Heat emoji overlay */
    .heat-emoji {
      position: fixed;
      font-size: 2rem;
      pointer-events: none;
      z-index: 0;
      animation: float-up 3s ease-out forwards;
    }

    @keyframes float-up {
      0% { opacity: 1; transform: translateY(0) rotate(0deg) scale(0.5); }
      30% { opacity: 1; transform: translateY(-60px) rotate(10deg) scale(1.2); }
      100% { opacity: 0; transform: translateY(-250px) rotate(40deg) scale(0.8); }
    }

    /* Confetti burst on start */
    .confetti {
      position: fixed;
      width: 8px;
      height: 8px;
      pointer-events: none;
      z-index: 5;
      animation: confetti-fall 1.5s ease-out forwards;
    }

    @keyframes confetti-fall {
      0% { opacity: 1; transform: translateY(0) rotate(0deg) scale(1); }
      100% { opacity: 0; transform: translateY(200px) rotate(720deg) scale(0.3); }
    }

    .hidden { display: none; }

    /* Respect user motion preferences for accessibility */
    @media (prefers-reduced-motion: reduce) {
      .main-button,
      .main-button.btn-inactive,
      .main-button.btn-active {
        animation: none;
      }
      
      .main-button::before {
        animation: none;
      }
      
      .main-button.btn-inactive:hover:not(:active),
      .main-button.btn-active:hover:not(:active) {
        transform: none;
      }
      
      .main-button.btn-inactive:active,
      .main-button.btn-active:active {
        transform: scale(0.98);
      }
      
      .slider-value.pop {
        animation: none;
      }
      
      input[type="range"]::-webkit-slider-thumb,
      input[type="range"]::-moz-range-thumb {
        transition: transform 0.1s ease;
      }
      
      input[type="range"]:active::-webkit-slider-thumb,
      input[type="range"]:active::-moz-range-thumb {
        transform: scale(1.1);
      }
    }

    /* Mobile optimizations */
    @media (max-width: 480px) {
      .container {
        padding: 16px;
      }

      h1 {
        font-size: clamp(1.5rem, 6vw, 2rem);
        margin-bottom: 6px;
      }

      .subtitle {
        font-size: clamp(0.75rem, 3vw, 0.9rem);
        margin-bottom: 30px;
      }

      .main-button {
        width: 240px;
        height: 240px;
        font-size: 1.7rem;
        margin-bottom: 50px;
      }

      .slider-section {
        max-width: 90%;
      }

      .slider-label {
        font-size: 1rem;
      }

      .slider-value {
        font-size: 1.8rem;
      }

      input[type="range"] {
        height: 14px;
      }

      input[type="range"]::-webkit-slider-thumb {
        width: 36px;
        height: 36px;
      }

      input[type="range"]::-moz-range-thumb {
        width: 36px;
        height: 36px;
      }

      .warning {
        font-size: 0.7rem;
        padding: 10px 16px;
        line-height: 1.5;
      }
    }

    @media (max-width: 360px) {
      .main-button {
        width: 200px;
        height: 200px;
        font-size: 1.5rem;
        margin-bottom: 40px;
      }

      .slider-value {
        font-size: 1.6rem;
      }
    }
  </style>
</head>
<body class="bg-cold">
  <div class="flames" id="flames"></div>
  <div class="heat-wave" id="heatWave"></div>

  <div class="container">
    <h1>üî• ÊâãÊ©üÁâàÊöñÊöñÂåÖ üî•</h1>
    <p class="subtitle">ËÆì‰Ω†ÁöÑÊâãÊ©üËÆäÊàêÊöñÊöñÂåÖÔºÅ</p>

    <!-- Main Button -->
    <button class="main-button btn-inactive" id="mainButton" onclick="toggleHeating()" aria-label="ÂïüÂãïÊöñÊöñÂåÖ">
      <span id="buttonEmoji" aria-hidden="true">üî•</span>
      <span id="buttonText" aria-hidden="true">ÂïüÂãïÊöñÊöñÂåÖ</span>
    </button>

    <!-- Slider -->
    <div class="slider-section">
      <div class="slider-label">
        <span class="slider-value" id="sliderValue">50%</span>
      </div>
      <input type="range" id="heatSlider" min="0" max="100" value="50">
    </div>
  </div>

  <div class="warning">
    ‚ö†Ô∏è Êú¨ÊáâÁî®ÈÄèÈÅéÂØÜÈõÜÈÅãÁÆóÁî¢ÁîüÁÜ±ËÉΩÔºåËÆìÊâãÊ©üÁôºÁÜ±„ÄÇÈï∑ÊôÇÈñì‰ΩøÁî®Ë´ãÊ≥®ÊÑèÊâãÊ©üÊ∫´Â∫¶ÔºåÈö®ÊôÇÂèØÂÅúÊ≠¢„ÄÇ
  </div>

  <script>
    // ‚îÄ‚îÄ State ‚îÄ‚îÄ
    let isRunning = false;
    let heatPercent = 50;
    let cpuWorkers = [];
    let glContext = null;
    let gpuAnimFrame = null;
    let hashCount = 0;
    let lastHashTime = Date.now();
    let flameInterval = null;

    // ‚îÄ‚îÄ DOM refs ‚îÄ‚îÄ
    const slider = document.getElementById('heatSlider');
    const sliderValue = document.getElementById('sliderValue');
    const mainButton = document.getElementById('mainButton');
    const flamesContainer = document.getElementById('flames');
    const heatWave = document.getElementById('heatWave');

    // ‚îÄ‚îÄ Slider ‚îÄ‚îÄ
    slider.addEventListener('input', function() {
      heatPercent = parseInt(this.value, 10);
      sliderValue.textContent = heatPercent + '%';
      sliderValue.classList.remove('pop');
      void sliderValue.offsetWidth;
      sliderValue.classList.add('pop');
      if (isRunning) {
        adjustWorkers();
      }
    });

    // ‚îÄ‚îÄ CPU Worker via Blob URL ‚îÄ‚îÄ
    function createWorkerCode() {
      const code = `
        let running = true;
        let counter = 0;

        // Simple hash-like computation (SHA-like mixing)
        function hashMix(data) {
          let h = 0x811c9dc5;
          for (let i = 0; i < data.length; i++) {
            h ^= data[i];
            h = Math.imul(h, 0x01000193);
          }
          return h >>> 0;
        }

        function heavyCompute() {
          const buf = new Uint8Array(256);
          while (running) {
            // Fill buffer with pseudo-random data
            for (let i = 0; i < 256; i++) {
              buf[i] = (buf[i] + i + counter) & 0xff;
            }
            // Run multiple rounds of hashing
            let result = 0;
            for (let round = 0; round < 1000; round++) {
              result = hashMix(buf);
              buf[round & 0xff] = result & 0xff;
            }
            counter++;
            if (counter % 500 === 0) {
              postMessage({ type: 'hash', count: 500 });
            }
          }
        }

        self.onmessage = function(e) {
          if (e.data === 'start') {
            running = true;
            heavyCompute();
          } else if (e.data === 'stop') {
            running = false;
            self.close();
          }
        };
      `;
      const blob = new Blob([code], { type: 'application/javascript' });
      return URL.createObjectURL(blob);
    }

    // ‚îÄ‚îÄ Toggle Heating ‚îÄ‚îÄ
    function toggleHeating() {
      if (isRunning) {
        stopHeating();
      } else {
        startHeating();
      }
    }

    function startHeating() {
      if (isRunning) return;
      isRunning = true;
      mainButton.classList.remove('btn-inactive');
      mainButton.classList.add('btn-active');
      mainButton.setAttribute('aria-label', 'ÂÜ∑ÂçªÂÅúÊ≠¢');
      document.getElementById('buttonEmoji').textContent = '‚ùÑÔ∏è';
      document.getElementById('buttonText').textContent = 'ÂÜ∑ÂçªÂÅúÊ≠¢';
      heatWave.classList.add('active');

      spawnConfettiBurst();
      adjustWorkers();
      startGPU();
      startFlames();
      updateDisplay();
    }

    function stopHeating() {
      isRunning = false;
      mainButton.classList.remove('btn-active');
      mainButton.classList.add('btn-inactive');
      mainButton.setAttribute('aria-label', 'ÂïüÂãïÊöñÊöñÂåÖ');
      document.getElementById('buttonEmoji').textContent = 'üî•';
      document.getElementById('buttonText').textContent = 'ÂïüÂãïÊöñÊöñÂåÖ';
      heatWave.classList.remove('active');

      // Stop CPU workers
      cpuWorkers.forEach(function(w) {
        w.postMessage('stop');
        w.terminate();
      });
      cpuWorkers = [];

      // Stop GPU
      stopGPU();

      // Stop flames
      stopFlames();

      // Reset display
      hashCount = 0;
      document.body.className = 'bg-cold';
    }

    // ‚îÄ‚îÄ Adjust CPU Workers based on heat % ‚îÄ‚îÄ
    function adjustWorkers() {
      var coreCount = navigator.hardwareConcurrency || 4;
      var desired = Math.max(1, Math.round(coreCount * (heatPercent / 100)));

      // Remove excess workers
      while (cpuWorkers.length > desired) {
        var w = cpuWorkers.pop();
        w.postMessage('stop');
        w.terminate();
      }

      // Add workers if needed
      var workerUrl = null;
      while (cpuWorkers.length < desired) {
        if (!workerUrl) workerUrl = createWorkerCode();
        var worker = new Worker(workerUrl);
        worker.onmessage = function(e) {
          if (e.data && e.data.type === 'hash') {
            hashCount += e.data.count;
          }
        };
        worker.postMessage('start');
        cpuWorkers.push(worker);
      }
      if (workerUrl) URL.revokeObjectURL(workerUrl);
    }

    // ‚îÄ‚îÄ GPU via WebGL heavy fragment shader ‚îÄ‚îÄ
    function startGPU() {
      var canvas = document.createElement('canvas');
      canvas.width = 256;
      canvas.height = 256;
      canvas.style.display = 'none';
      document.body.appendChild(canvas);

      try {
        glContext = canvas.getContext('webgl2') || canvas.getContext('webgl');
      } catch(e) {
        glContext = null;
      }

      if (!glContext) {
        return;
      }

      var gl = glContext;

      // Vertex shader
      var vsSrc = `
        attribute vec2 a_pos;
        void main() { gl_Position = vec4(a_pos, 0.0, 1.0); }
      `;

      // Heavy fragment shader ‚Äî lots of math to keep GPU busy
      var fsSrc = `
        precision highp float;
        uniform float u_time;
        uniform float u_intensity;

        float hash(vec2 p) {
          vec3 p3 = fract(vec3(p.xyx) * 0.1031);
          p3 += dot(p3, p3.yzx + 33.33);
          return fract((p3.x + p3.y) * p3.z);
        }

        void main() {
          vec2 uv = gl_FragCoord.xy / 256.0;
          float val = 0.0;
          // Multiple iterations to increase GPU load
          int iters = int(u_intensity * 200.0);
          for (int i = 0; i < 200; i++) {
            if (i >= iters) break;
            float fi = float(i);
            val += hash(uv * fi + u_time);
            val = fract(val);
          }
          gl_FragColor = vec4(val, val * 0.5, val * 0.2, 1.0);
        }
      `;

      function compileShader(src, type) {
        var shader = gl.createShader(type);
        gl.shaderSource(shader, src);
        gl.compileShader(shader);
        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
          gl.deleteShader(shader);
          return null;
        }
        return shader;
      }

      var vs = compileShader(vsSrc, gl.VERTEX_SHADER);
      var fs = compileShader(fsSrc, gl.FRAGMENT_SHADER);

      if (!vs || !fs) {
        return;
      }

      var program = gl.createProgram();
      gl.attachShader(program, vs);
      gl.attachShader(program, fs);
      gl.linkProgram(program);

      if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
        return;
      }

      gl.useProgram(program);

      // Full-screen quad
      var buf = gl.createBuffer();
      gl.bindBuffer(gl.ARRAY_BUFFER, buf);
      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
        -1, -1,  1, -1,  -1, 1,
        -1,  1,  1, -1,   1, 1
      ]), gl.STATIC_DRAW);

      var aPos = gl.getAttribLocation(program, 'a_pos');
      gl.enableVertexAttribArray(aPos);
      gl.vertexAttribPointer(aPos, 2, gl.FLOAT, false, 0, 0);

      var uTime = gl.getUniformLocation(program, 'u_time');
      var uIntensity = gl.getUniformLocation(program, 'u_intensity');

      var startTime = Date.now();

      function renderLoop() {
        if (!isRunning) return;
        var elapsed = (Date.now() - startTime) / 1000.0;
        gl.uniform1f(uTime, elapsed);
        gl.uniform1f(uIntensity, heatPercent / 100.0);
        // Draw multiple times for extra GPU load
        var passes = Math.max(1, Math.floor(heatPercent / 10));
        for (var p = 0; p < passes; p++) {
          gl.uniform1f(uTime, elapsed + p * 0.1);
          gl.drawArrays(gl.TRIANGLES, 0, 6);
        }
        gl.finish();
        gpuAnimFrame = requestAnimationFrame(renderLoop);
      }

      renderLoop();
    }

    function stopGPU() {
      if (gpuAnimFrame) {
        cancelAnimationFrame(gpuAnimFrame);
        gpuAnimFrame = null;
      }
      if (glContext) {
        var ext = glContext.getExtension('WEBGL_lose_context');
        if (ext) ext.loseContext();
        var canvas = glContext.canvas;
        glContext = null;
        if (canvas && canvas.parentNode) canvas.parentNode.removeChild(canvas);
      }
    }

    // ‚îÄ‚îÄ Flame particles ‚îÄ‚îÄ
    function startFlames() {
      flameInterval = setInterval(function() {
        if (!isRunning) return;
        var count = Math.floor(heatPercent / 15) + 1;
        for (var i = 0; i < count; i++) {
          spawnFlame();
        }
      }, 300);
    }

    function stopFlames() {
      if (flameInterval) {
        clearInterval(flameInterval);
        flameInterval = null;
      }
      flamesContainer.innerHTML = '';
    }

    function spawnFlame() {
      var particle = document.createElement('div');
      particle.className = 'flame-particle';
      var x = Math.random() * 100;
      var size = 4 + Math.random() * 12;
      var duration = 2 + Math.random() * 3;
      var hue = 10 + Math.random() * 40; // orange-red range
      var useSwirl = Math.random() < 0.3;
      particle.style.left = x + '%';
      particle.style.width = size + 'px';
      particle.style.height = size + 'px';
      particle.style.background = 'hsl(' + hue + ', 100%, 55%)';
      particle.style.animation = (useSwirl ? 'rise-swirl ' : 'rise ') + duration + 's ease-out forwards';
      particle.style.filter = 'blur(' + (Math.random() < 0.5 ? '1' : '2') + 'px)';
      flamesContainer.appendChild(particle);

      setTimeout(function() {
        if (particle.parentNode) particle.parentNode.removeChild(particle);
      }, duration * 1000);
    }

    // ‚îÄ‚îÄ Display update loop ‚îÄ‚îÄ
    function updateDisplay() {
      if (!isRunning) return;

      // Background color transition
      if (heatPercent < 30) {
        document.body.className = 'bg-cold';
      } else if (heatPercent < 70) {
        document.body.className = 'bg-warm';
      } else {
        document.body.className = 'bg-hot';
      }

      // Spawn emoji occasionally
      if (Math.random() < 0.15 && heatPercent > 20) {
        spawnEmoji();
      }

      requestAnimationFrame(updateDisplay);
    }

    // ‚îÄ‚îÄ Fun emoji bursts ‚îÄ‚îÄ
    var heatEmojis = ['üî•', 'üå∂Ô∏è', '‚òÄÔ∏è', 'üí•', '‚ú®', 'üß°', '‚ù§Ô∏è‚Äçüî•', '‚ô®Ô∏è', 'ü´†', 'ü•µ'];

    function spawnEmoji() {
      var emoji = document.createElement('div');
      emoji.className = 'heat-emoji';
      emoji.textContent = heatEmojis[Math.floor(Math.random() * heatEmojis.length)];
      emoji.style.left = (10 + Math.random() * 80) + '%';
      emoji.style.top = (20 + Math.random() * 60) + '%';
      emoji.style.fontSize = (1.5 + Math.random() * 2) + 'rem';
      document.body.appendChild(emoji);
      setTimeout(function() {
        if (emoji.parentNode) emoji.parentNode.removeChild(emoji);
      }, 3000);
    }

    // ‚îÄ‚îÄ Confetti burst on start ‚îÄ‚îÄ
    function spawnConfettiBurst() {
      var colors = ['#ff4500', '#ffd700', '#ff6600', '#ff0000', '#ffaa00', '#fff', '#ff3366'];
      for (var i = 0; i < 20; i++) {
        (function(idx) {
          setTimeout(function() {
            var confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = (30 + Math.random() * 40) + '%';
            confetti.style.top = (35 + Math.random() * 15) + '%';
            confetti.style.background = colors[idx % colors.length];
            confetti.style.borderRadius = Math.random() < 0.5 ? '50%' : '2px';
            confetti.style.width = (5 + Math.random() * 8) + 'px';
            confetti.style.height = (5 + Math.random() * 8) + 'px';
            document.body.appendChild(confetti);
            setTimeout(function() {
              if (confetti.parentNode) confetti.parentNode.removeChild(confetti);
            }, 1500);
          }, idx * 30);
        })(i);
      }
    }
  </script>
</body>
</html>
